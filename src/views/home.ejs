<%- include('./partials/header') %>
<main class="home-container">
  <section class="intro">
    <p class="intro-line">
      Bienvenue sur le site des passionnés du cinéma et de la cuisine&nbsp;!
    </p>
    <p class="intro-line">
      Vous trouverez des recettes de cuisine inspirées de vos films préférés.
    </p>
    <p class="intro-note">
      -Attention, ces recettes peuvent contenir des spoilers… et beaucoup de fromage-
    </p>
  </section>
  <button class="filter-btn" aria-label="Filtrer les recettes">
    <img src="/images/Icons/filters.svg" alt="Filtrer" />
  </button>
  <h2 class="section-heading">
    <span class="dash">-</span> À L’AFFICHE <span class="dash">-</span>
  </h2>
  <section class="cards" id="cards">
    
  </section>
  <div class="cta">
    <a href="#" class="btn-load-all" id="showMoreBtn">AFFICHER PLUS</a>
  </div>
  <div class="pagination" id="pagination" style="display: none;">
   
  </div>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const showMoreBtn = document.getElementById('showMoreBtn');
    const cardsSection = document.getElementById('cards');
    const paginationSection = document.getElementById('pagination');

    const mockRecipes = [
      { id: 1, name: "Pâtes Carbonara", image_url: "/images/pates-carbonara.jpg", movie: { title: "Un film italien" } },
      { id: 2, name: "Tarte aux Pommes", image_url: "/images/tarte-pommes.jpg", movie: { title: "Un film français" } },
      { id: 3, name: "Burger Maison", image_url: "/images/burger-maison.jpg", movie: { title: "Un film américain" } },
      { id: 4, name: "Pizza Margherita", image_url: "/images/pizza-margherita.jpg", movie: { title: "Un autre film italien" } },
      { id: 5, name: "Crêpes Suzette", image_url: "/images/crepes-suzette.jpg", movie: { title: "Un film classique français" } },
      { id: 6, name: "Hot Dog", image_url: "/images/hot-dog.jpg", movie: { title: "Un film américain classique" } },
      { id: 7, name: "Tiramisu", image_url: "/images/tiramisu.jpg", movie: { title: "Dessert d’un film romantique" } },
      { id: 8, name: "Sushi", image_url: "/images/sushi.jpg", movie: { title: "Un film japonais" } },
      { id: 9, name: "Tacos", image_url: "/images/tacos.jpg", movie: { title: "Un film mexicain" } },
      { id: 10, name: "Falafel", image_url: "/images/falafel.jpg", movie: { title: "Un film du Moyen-Orient" } },
      { id: 11, name: "Biryani", image_url: "/images/biryani.jpg", movie: { title: "Un film indien" } },
      { id: 12, name: "Kimchi", image_url: "/images/kimchi.jpg", movie: { title: "Un film coréen" } },
      { id: 13, name: "Bibimbap", image_url: "/images/bibimbap.jpg", movie: { title: "Encore un film coréen" } },
      { id: 14, name: "Pad Thaï", image_url: "/images/pad-thai.jpg", movie: { title: "Un film thaïlandais" } },
    ];

    const recipesPerPage = 6;

    function displayRecipes(recipes) {
      cardsSection.innerHTML = '';
      recipes.forEach(recipe => {
        const recipeElement = document.createElement('article');
        recipeElement.className = 'card';
        recipeElement.innerHTML = `
          <div class="card-image">
            ${recipe.image_url
              ? `<img src="${recipe.image_url}" alt="Photo de ${recipe.name}" />`
              : `<img src="/images/tartelette.png" alt="Image par défaut" />`}
          </div>
          <div class="card-body">
            <h3 class="recipe-title">${recipe.name}</h3>
            <p class="film-title"><em>${recipe.movie.title}</em></p>
          </div>
        `;
        cardsSection.appendChild(recipeElement);
      });
    }

    function setupPagination() {
      const totalPages = Math.ceil(mockRecipes.length / recipesPerPage);
      paginationSection.innerHTML = '';
      paginationSection.style.display = 'block';

      for (let i = 1; i <= totalPages; i++) {
        const button = document.createElement('button');
        button.innerText = i;
        button.addEventListener('click', () => {
          const start = (i - 1) * recipesPerPage;
          const end = start + recipesPerPage;
          const currentSlice = mockRecipes.slice(start, end);
          displayRecipes(currentSlice);
        });
        paginationSection.appendChild(button);
      }
    }

    
    displayRecipes(mockRecipes.slice(0, 3));

    showMoreBtn.addEventListener('click', function (event) {
      event.preventDefault();

      
      displayRecipes(mockRecipes.slice(0, recipesPerPage));

      
      showMoreBtn.style.display = 'none';

     
      setupPagination();
    });
  });
</script>

<%- include('./partials/footer') %>
